# PDF Report Redesign - Requirements

## 1. Overview

Redesign the PDF reports generated by the Historian Reports application to have a lighter, more printer-friendly appearance that aligns with Kagome company branding. The current reports use colored backgrounds and multiple pages per tag, which is not optimal for printing and doesn't match the company's professional aesthetic.

## 2. User Stories

### 2.1 As a report user, I want printer-friendly reports
**Acceptance Criteria:**
- Reports use minimal color (grayscale for text, borders, tables)
- Only charts/trends retain color for data visualization
- Reports use less paper by consolidating content
- High contrast text for clear printing
- Professional appearance suitable for business use

### 2.2 As a report user, I want consistent branding
**Acceptance Criteria:**
- Header reflects Kagome company branding
- No colored background boxes (use simple borders/lines instead)
- Clean, professional typography
- Company name displayed prominently but subtly

### 2.3 As a report user, I want generation metadata on every page
**Acceptance Criteria:**
- Footer appears on ALL pages (not just last page)
- Footer includes: "Generated by Historian Reports on [date/time]"
- Date/time format: "1/21/2026, 8:37:08 PM" (locale string format)
- Footer is consistent across all pages

### 2.4 As a report user, I want page numbers
**Acceptance Criteria:**
- Page numbers appear on every page
- Format: "Page X of Y" (e.g., "Page 1 of 5")
- Page numbers are clearly visible
- Page numbers are positioned consistently (footer area)

### 2.5 As a report user, I want concise reports
**Acceptance Criteria:**
- Reduce total page count where possible
- Consolidate sections to avoid unnecessary page breaks
- Maintain all essential information
- Optimize layout for space efficiency

## 3. Technical Requirements

### 3.1 Header Redesign
- Remove colored background (#0ea5e9 blue)
- Use black/gray text for company name
- Add subtle border or line separator instead of colored box
- Include "Kagome" as company name
- Maintain professional appearance

### 3.2 Footer Implementation
- Add footer to ALL pages during PDF generation
- Include generation timestamp in format: "Generated by Historian Reports on [locale date/time string]"
- Include page numbers: "Page X of Y"
- Use small, unobtrusive font (8pt)
- Gray color (#666666) for footer text
- Horizontal line separator above footer

### 3.3 Color Scheme
- **Text**: Black (#000000) or dark gray (#111827)
- **Borders/Lines**: Light gray (#cccccc, #e5e7eb)
- **Tables**: Grayscale alternating rows (#f9fafb, white)
- **Charts**: Retain existing color palette for data visualization
- **Quality indicators**: Retain color coding (green=good, red=bad, orange=uncertain)

### 3.4 Layout Optimization
- Review page breaks to consolidate content
- Reduce whitespace where appropriate
- Maintain readability and professional appearance
- Ensure all essential data is preserved

## 4. Constraints

### 4.1 Preserve Existing Functionality
- All data must still be included
- Chart generation remains unchanged (colors preserved)
- Statistical calculations unchanged
- Data tables remain complete

### 4.2 Maintain Code Structure
- Changes limited to `reportGeneration.ts`
- No breaking changes to service interfaces
- Maintain existing error handling
- Preserve logging functionality

### 4.3 Compatibility
- PDF format remains unchanged (PDFKit)
- File naming convention unchanged
- Report configuration structure unchanged

## 5. Out of Scope

- DOCX format generation (not yet implemented)
- Chart color scheme changes
- Report template system overhaul
- Database or data retrieval changes
- Frontend UI changes

## 6. Success Criteria

- Reports print clearly in black and white
- Page count reduced by at least 20% where possible
- All pages have footer with generation info and page numbers
- Header uses Kagome branding without colored backgrounds
- Professional appearance maintained
- All existing data preserved
